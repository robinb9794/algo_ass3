<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML lang="en-us">
<HEAD>
<META name="uDrawGraph-root" content="">
<META http-equiv="Content-Style-Type" content="text/css">
<TITLE>uDraw(Graph) 3.1 Online Documentation: Multi-Graph/View/Window Modes in the API</TITLE>
<STYLE type="text/css">
    <!--
    P,LI,UL,OL,TD,TH,BODY,B { font-size:12pt; font-family:Helvetica,Arial; }
    PRE { font-size:12pt; font-family:Courier; }
    P.tbd { font-size:14pt; color:#ff0000; }
    H1 { font-size:14pt; font-family:Helvetica,Arial; font-weight:bold; }
    H1.large { font-size:18pt; font-family:Helvetica,Arial; font-weight:bold; }
    H2 { font-size:12pt; font-family:Helvetica,Arial; font-weight:bold; }
    TH.table { background-color:#b6bfdd; }
    TD.table { background-color:#b6bfdd; border-color:#ffffff; border-top-style:solid; border-top-width:thin; }
    TD.pricetable { background-color:#b6bfdd; border-color:#ffffff; border-top-style:solid; border-top-width:thin; text-align:right; }
    TD,BODY { color:#00000; background-color:#ffffff; }
    TD.blue { background-color:#383887; }
    TD.grey { background-color:#cccccc; }
    B.header { font-size:12pt; font-family:Helvetica,Arial; font-weight:bold;  }
    DIV.header { font-size:12pt; font-family:Helvetica,Arial; font-weight:bold;  }
    DIV.footer { font-size:10pt; font-family:Helvetica,Arial; color:#000000; }
    DIV.title { font-size:14pt; font-family:Helvetica,Arial; font-weight:bold;}
    SUP.tm { font-style:normal; font-size:x-small; vertical-align:top; }
    A.webmaster { font-size:10pt; font-family:Helvetica,Arial; color:#ffffff; }
    //-->
    </STYLE>
</HEAD>
<BODY>
<TABLE border="0" cellspacing="0" cellpadding="0" summary="blind table">
<TR>
<TD align="left">
<DIV class="header">
<A href="http://www.informatik.uni-bremen.de/uDrawGraph/en/"><IMG alt="University of Bremen" border="0" align="top" src="uni-bremen.gif"></A>
</DIV>
</TD>
</TR>
<TR>
<TD valign="top" align="left">
<HR noshade size="1">
<DIV class="header">
<B class="header">Manual</B>
</DIV>
<HR noshade size="1">
<DIV class="header">
<A href="main.html"><B>Main</B></A><B><IMG alt="->" src="small_arrow.gif" WIDTH="18" HEIGHT="9"></B><A href="api.html"><B>API</B></A><B><IMG alt="->" src="small_arrow.gif" WIDTH="18" HEIGHT="9"></B><B class="header">Multi-Graph/View/Window Modes</B>
</DIV>
<HR noshade size="1">
  
  
  
  
  
    
    
    
    
  
  <H1>Multi-Graph Mode in the API</H1>
  
  <A name="multi_graph"></A>
  <P>
    uDraw(Graph) is able to visualize more than one graph at a time,
    called multi-graph mode. 
    Please read about multi-graph basics in the
  <A href="conc_mul.html" target="_top">concepts chapter</A> 
    before going on here. 
  </P>
  <P>
    In multi-graph mode, each loaded graph is shown in a different 
  <A href="gui_base.html" target="_top">base window</A>. 
    Operations applied to one graph do not affect the other graphs. 
    The notion of contexts have been introduced to deal with more 
    than one concurrent graph at the API level.
    Each context has its own scope, so it is not necessary to keep 
    identifiers unique between two contexts, but of course all 
    identifiers have to be unique inside a context.
    Identifiers are used for nodes and edges in a 
  <A href="term.html" target="_top">term representation</A> or for menus.
  </P>
  <P>
    In multi-graph mode, each graph has a context with a unique context ID
    (string). 
    The context ID is either automatically generated by uDraw(Graph) when a 
    new context is opened with command
  <A href="api_cmd_multi.html#new_context" target="_top">multi(new_context)</A> 
    or can be chosen by the application itself when the new context is
    opened with the alternative command
  <A href="api_cmd_multi.html#open_context" target="_top">multi(open_context(...))</A>.
    Opening a new context creates a fresh and empty base window.
    Afterwards, all commands sent to the API are applied to this context 
    until the current context is set to another one. 
    So for example, by sending command
  <A href="api_cmd_menu.html#file_open_graph" target="_top">menu(file(open_graph(...)))</A>
    directly after opening a new context, the current context will first
    switch to the new context automatically and afterwards the graph will 
    be displayed in the new window. 
    If the application wants to apply an API command to another graph that 
    has been previously opened, then first of all it has to set the current 
    context to the one that belongs to the other graph. 
    So a context is used to specify one of the currently loaded graphs
    that should be affected by subsequent API commands.
    The context can be set using API command
  <A href="api_cmd_multi.html#set_context" target="_top">multi(set_context(...))</A>.
  </P>

  <A name="two_answers"></A>
  <H2>Principle of two Answers in Multi-Graph Mode</H2>
  <P>
    By default, uDraw(Graph) operates in single-graph mode where setting a
    context is not necessary.
    After entering the multi-graph mode (i.e. after sending the first 
  <A href="api_cmd_multi.html#new_context" target="_top">multi(new_context)</A> 
    or
  <A href="api_cmd_multi.html#open_context" target="_top">multi(open_context(...))</A>
    command to the API), 
    each answer from the API will have a preluding 
  <A href="api_answ_all.html#context" target="_top">context(...)</A>
    answer that is used to specify the context where the event happened. 
    So in multi-graph mode, the application will always get two answers 
    with each event: first the context and then the event itself. 
    Note that the preluding context answer does not switch the current 
    context.
    This can only be done by the application itself, as described above.
  </P>
  <P>
    To guarantee full compatibility with applications designed for 
    uDraw(Graph) predecessor versions prior to 2.0 (which do not expect a 
    preluding context), the context answer is only used after entering 
    the multi-graph mode. 
    At start-up time, uDraw(Graph) operates in single-graph mode by default. 
    uDraw(Graph) cannot enter the multi-graph mode by itself with user 
    interface operations, so only the application can decide to do so. 
  </P>

  <A name="initialization"></A>
  <H2>Entering the Multi-Graph Mode at Initialization Time</H2>
  <P>
    If the application intends to enter the multi-graph mode later in 
    a session, it should open the first context at initialization time,
    because for consistency reasons, uDraw(Graph) has to remove a loaded 
    graph as soon as the first context is opened (i.e. when the 
    single-graph mode is left). 
  </P>
  <P>
    The application is able to close an opened context by sending  command
  <A href="api_cmd_menu.html#file_close" target="_top">menu(file(close))</A>. 
    This is the equivalent operation of menu
  <A href="gui_file.html" target="_top">File/Close</A>. 
    After closing a context, all of the windows of the particular graph 
    will be removed, and the corresponding context ID cannot be used any 
    further. 
    Afterwards, the application has to open a new context or specify one 
    of the remaining contexts to be the new current context. 
    Sending any other command without changing the context will be 
    answered with an error message, because the current context is undefined
    after closing as long as a new one is not specified. 
    It is even possible to close the last context without quitting uDraw(Graph). 
    After closing the last context, no window will be visible any longer, 
    but the uDraw(Graph) process is still running in the background. 
    In this situation, the application can open a new first context and a 
    new base window will come back. 
  </P>
  <P>
  <STRONG>Note:</STRONG> 
    the user can also close a context at any time by using menu
  <A href="gui_file.html" target="_top">File/Close</A>
    or the equivalent generic window function of the operating system
    respective window manager.
    The application will receive the answer
  <A href="api_answ_all.html#close" target="_top">close</A>
    from the API after the user or the application has decided to close 
    a context. 
    If closing a context is not appropriate for the user, then 
    the application should 
  <A href="api_gui_config.html" target="_top">redefine the user interface</A>
    or at least
  <A href="api_gui_extend.html#interpose_file_events" target="_top">
    take control of the "File" menu</A>
    in order to catch these events. 
  </P>

  <A name="multi_view"></A>
  <H1>Multi-View Mode in the API</H1>
  <P>
    The multi-view mode is used to have different base windows where 
    the same graph is visualized. 
    In opposition to 
  <A href="api_multi_modes.html" target="_top">multi-graph</A>, 
    here the base windows show the same graph, so working with one 
    view manipulates all the other views of the graph, too. 
    Please refer to multi-view basics in the
  <A href="conc_mul.html" target="_top">concepts chapter</A>.
    Multi-graph and multi-view can be mixed at the same time, 
    e.g. several graphs can be loaded and each may have different views. 
    Multi-view is a feature of the user interface level and cannot be 
    controlled on the API level, except for opening a new view using 
    command 
  <A href="api_cmd_menu.html#view_open_new_view" target="_top">menu(view(open_new_view))</A>. 
    So it is not possible for an application to close a particular view,
    but you have the option to use the
  <A href="api_multi_modes.html#multi_window" target="_top">multi-window mode</A>
    where all base windows can be controlled.
    All views (base windows) of a context (graph) are removed when the 
    corresponding context is closed with command 
  <A href="api_cmd_menu.html#file_close" target="_top">menu(file(close))</A>.
  </P>

  <A name="master_view"></A>
  <H2>Master View</H2>
  <P>
    The user is able to open and close new views of a graph at any time. 
    The first (i.e. oldest) view of a context is called master view.
    The master view can be closed by the user without closing the whole 
    context as long as there is one other view of the same graph 
    which will become the new master view. 
    For example, if the user opens one additional view with menu
  <A href="gui_view.html" target="_top">View/Open New View</A>
    after starting the system and loading a graph, 
    then he can work with the same graph in two different base windows. 
    Now, the user is able to close the first view (master view) with 
    menu 
  <A href="gui_file.html" target="_top">File/Close</A>
    without closing the whole context/graph. 
    The second remaining view will serve as the new master view in 
    this situation. 
  </P>
  <P>
    Most of the commands dealing with one base window rather than the
    whole graph (e.g. setting the scale, focusing nodes or setting
    window position/extension, etc.) are applied only to the master 
    view window of a context and not to all of the other views. 
    The master view is always the oldest view of a context. 
    The other views cannot be manipulated with API commands, 
    because multi-view is a feature of the user interface rather 
    than the API.
    But the multi-window mode can be used to have access to all
    individual base windows, read below.
  </P>

  <A name="multi_window"></A>
  <H1>Multi-Window Mode in the API</H1>
  <P>
    Usually, the application has no access to individual base windows 
    (views) of a context (graph). 
    But this is possible in the alternative multi-window mode where an 
    application can access all base windows, whether they belong to
    multiple graphs or views.
    The idea is to add an additional window ID (beside the context ID) 
    to the relevant API commands and answers.
  </P>
  <P>
    The multi-window mode is not compatible with previous versions of the 
    API (where window IDs are not expected), so the application must 
    be designed to operate in this mode by accepting the special kind of 
    answers mentioned below.
    To avoid compatibility problems, the multi-window mode 
    has to be explicitly activated using command-line option 
  <A href="opt.html#window_api" target="_top">-window_api</A>.
    After this activation, the multi-window is entered as soon as the
    first command
  <A href="api_cmd_multi.html#new_context" target="_top">multi(new_context)</A> 
    or
  <A href="api_cmd_multi.html#open_context" target="_top">multi(open_context(...))</A>
    is sent to the API, similar to the
  <A href="api_multi_modes.html#multi_graph" target="_top">multi-graph</A>
    mode described above.
  </P>
  <P>
    Instead of answer
  <A href="api_answ_all.html#context" target="_top">context(...)</A>
    known from the multi-graph mode, the answer
  <A href="api_answ_all.html#context_window" target="_top">context_window(...)</A>
    is used after the multi-window mode has been entered.
    Here, the application can find a window ID maintained by uDraw(Graph).
    This window ID can be used in command
  <A href="api_cmd_multi.html#set_context" target="_top">multi(set_context(...))</A>
    to restrict all subsequent commands to that particular base window.
    In multi-window mode, the application is informed with the answers 
  <A href="api_answ_all.html#open_window" target="_top">open_window</A> 
    and 
  <A href="api_answ_all.html#close_window" target="_top">close_window(...)</A> 
    about creation and destruction of a base window. 
  </P>
  <P>
    To summarize it, the multi-window mode is an extension of the 
    multi-graph mode where the application has full control over any
    base window. The multi-view mode is not accessible from the API
    except of manipulating the master view and opening new views.
  </P>

  
<BR>
<IMG width="1" height="50" alt="" src="space.gif"><BR>
<HR noshade size="1">
<DIV class="footer">
    All other trademarks mentioned herein are the property of their
    respective owners.
    Information on this page is subject to change without notice.
    Please send comments regarding this online documentation to 
    <A href="uDrawGraph@informatik.uni-bremen.de">uDrawGraph@informatik.uni-bremen.de</A>.
    </DIV>
<BR>
</TD>
</TR>
<TR>
<TD class="footer" align="right" valign="middle">
<DIV class="footer">
    Copyright &copy; 2005, Universit&auml;t Bremen. All rights reserved.
    <IMG width="5" height="1" alt="" src="space.gif"></DIV>
</TD>
</TR>
</TABLE>
</BODY>
</HTML>
